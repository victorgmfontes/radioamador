<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Address to Coordinates</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      padding: 20px;
    }
    input, button {
      margin: 10px 0;
      padding: 10px;
      font-size: 16px;
      width: 100%;
      max-width: 400px;
    }
    .output {
      margin-top: 20px;
      padding: 10px;
      border: 1px solid #ddd;
      background: #f9f9f9;
    }
  </style>
</head>
<body>
  <h1>Manual Coordinates Input</h1>
  <p>Enter your latitude and longitude below:</p>

  <input type="text" id="latitude" placeholder="Enter latitude (e.g., -7.9265467)">
  <input type="text" id="longitude" placeholder="Enter longitude (e.g., -34.8531041)">
  <button onclick="processCoordinates()">Process Coordinates</button>

  <div id="results" class="output">
    <h3>Results:</h3>
    <p><strong>Latitude:</strong> <span id="lat-dms">-</span></p>
    <p><strong>Longitude:</strong> <span id="lon-dms">-</span></p>
    <p><strong>Latitude (Decimal):</strong> <span id="lat-decimal">-</span></p>
    <p><strong>Longitude (Decimal):</strong> <span id="lon-decimal">-</span></p>
    <p><strong>Grid Locator:</strong> <span id="grid-locator">-</span></p>
  </div>

  <script>
    function processCoordinates() {
      const latInput = document.getElementById('latitude').value;
      const lonInput = document.getElementById('longitude').value;

      const latitude = parseFloat(latInput);
      const longitude = parseFloat(lonInput);

      if (isNaN(latitude) || isNaN(longitude)) {
        alert('Please enter valid numeric values for latitude and longitude!');
        return;
      }

      // Display in decimal format
      document.getElementById('lat-decimal').innerText = latitude.toFixed(6);
      document.getElementById('lon-decimal').innerText = longitude.toFixed(6);

      // Convert to DMS (Degrees, Minutes, Seconds)
      document.getElementById('lat-dms').innerText = convertToDMS(latitude, true);
      document.getElementById('lon-dms').innerText = convertToDMS(longitude, false);

      // Calculate and display Grid Locator
      const gridLocator = calculateGridLocator(latitude, longitude);
      document.getElementById('grid-locator').innerText = gridLocator;
    }

    function convertToDMS(coordinate, isLatitude) {
      const absolute = Math.abs(coordinate);
      const degrees = Math.floor(absolute);
      const minutesNotTruncated = (absolute - degrees) * 60;
      const minutes = Math.floor(minutesNotTruncated);
      const seconds = ((minutesNotTruncated - minutes) * 60).toFixed(2);

      const direction = coordinate >= 0
        ? isLatitude ? 'N' : 'E'
        : isLatitude ? 'S' : 'W';

      return `${degrees}Â° ${minutes}' ${seconds}" ${direction}`;
    }

    function calculateGridLocator(lat, lon) {
      const upperCase = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
      const lowerCase = 'abcdefghijklmnopqrstuvwxyz';

      lat += 90;
      lon += 180;

      const latField = Math.floor(lat / 10);
      const lonField = Math.floor(lon / 20);
      const latSquare = Math.floor(lat % 10);
      const lonSquare = Math.floor((lon % 20) / 2);
      const latSubs = Math.floor((lat - Math.floor(lat)) * 24);
      const lonSubs = Math.floor((lon - Math.floor(lon)) * 24);

      return (
        upperCase.charAt(lonField) +
        upperCase.charAt(latField) +
        lonSquare +
        latSquare +
        lowerCase.charAt(lonSubs) +
        lowerCase.charAt(latSubs)
      );
    }
  </script>
</body>
</html>
